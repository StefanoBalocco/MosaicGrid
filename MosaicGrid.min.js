"use strict";var MosaicGrid;!function(t){class s{constructor(t,s){this.t=0,this.s=0,this.i=document.getElementById(t),this.o=s,this.h=()=>{this.ResizeItems()},this.i&&(window.addEventListener("resize",this.h),this.ResizeItems())}Destroy(){window.removeEventListener("resize",this.h),this.i=null}ResizeItem(t){const s=t.getElementsByTagName("img");if(0<s.length){const i=s.length;for(let o=0;o<i;o++)if(!s[o].complete){new Promise(i=>{s[o].onload=()=>{i(t)},s[o].onerror=()=>{i(t)},s[o].complete&&i(t)}).then(t=>{this.ResizeItem(t)}).catch(()=>{})}}if(0<this.t+this.s){const s=t.querySelectorAll(":scope > div");if(s&&1===s.length){const i=window.getComputedStyle(t);let o=(parseFloat(i.getPropertyValue("border-top-width"))||0)+(parseFloat(i.getPropertyValue("border-bottom-width"))||0)+(parseFloat(i.getPropertyValue("margin-top"))||0)+(parseFloat(i.getPropertyValue("margin-bottom"))||0)+(parseFloat(i.getPropertyValue("padding-top"))||0)+(parseFloat(i.getPropertyValue("padding-bottom"))||0)+s[0].getBoundingClientRect().height;t.style.gridRowEnd="span "+Math.ceil((o+this.s)/(this.t+this.s))}}}ResizeItems(){if(this.i){const t=window.getComputedStyle(this.i);this.t=parseFloat(t.getPropertyValue("grid-auto-rows"))||0,this.s=parseFloat(t.getPropertyValue("grid-row-gap"))||0;const s=this.i.getElementsByClassName(this.o),i=s.length;for(let t=0;t<i;t++){const i=s[t];this.ResizeItem(i)}}}AppendItems(t){if(this.i){const s=t.length;for(let i=0;i<s;i++){const s=this.i.appendChild(t[i]);this.ResizeItem(s)}}}PrependItems(t){if(this.i)if(0<this.i.childNodes.length){const s=t.length;for(let i=0;i<s;i++){const s=this.i.insertBefore(t[i],this.i.childNodes[0]);this.ResizeItem(s)}}else this.AppendItems(t)}}t.Create=function(t,i){return new s(t,i)}}(MosaicGrid||(MosaicGrid={}));